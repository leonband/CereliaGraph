  <ion-content [fullscreen]="true">
    <ion-header [translucent]="true">
      <ion-toolbar>
        <ion-title size="large">Riepilogo Consumi  </ion-title>
        <ion-img slot="start" src="../../assets/2ijFVSCUf2QwxDHK5fsmK9tLTXN.svg" class="logo-full" alt="mylogo"></ion-img>
        <ion-img slot="end" src="../../assets/logo ENERTECH Bianco.png" class="logo-full" alt="mylogo"></ion-img>
      </ion-toolbar>
    </ion-header>


  <div>
    <ion-grid class="grid">
                                

      <!-- -->
      <ion-row>
        <ion-col>
          <ion-card>
            <ion-card-header>
              <ion-card-title>MENU</ion-card-title>
              <ion-card-subtitle>Seleziona periodo e dati</ion-card-subtitle>
            </ion-card-header>
            <ion-card-content>
              <ion-grid>
                <ion-row>
                  <ion-col>
                    <ion-grid>
                      <ion-row>
                        <ion-col>
                          <ion-card>
                            <ion-card-header>
                              <ion-label>------ Mese di Inizio -------</ion-label>
                            </ion-card-header>
                            <ion-card-content>
                              <ion-datetime-button [disabled]="!isButtonEnabled" datetime="date1"></ion-datetime-button>
                                <ion-modal [keepContentsMounted]="true">
                                  <ng-template>
                                    <ion-datetime presentation="date" isDateEnabled="existData" yearValues="2021, 2022, 2024" id="date1" (ionChange)="startDateChanged($event)"></ion-datetime>
                                    <div id="startDatetimeValue"></div>
                                  </ng-template>
                                </ion-modal>
                            </ion-card-content>
                          </ion-card>
                        </ion-col> 
                        
                        <ion-col>
                          <ion-card>
                            <ion-card-header>
                              <ion-label>------ Mese di Fine -------</ion-label>
                            </ion-card-header>
                            <ion-card-content>
                              <ion-datetime-button [disabled]="!isButtonEnabled" datetime="date2"></ion-datetime-button>
                              <ion-modal [keepContentsMounted]="true">
                                <ng-template>
                                  <ion-datetime presentation="date" id="date2" yearValues="2021, 2022, 2024 " (ionChange)="endDateChanged($event)"></ion-datetime>
                                  <div id="endDatetimeValue"></div>
                                </ng-template>
                              </ion-modal>
                            </ion-card-content>
                          </ion-card>
                        </ion-col>
                        </ion-row>
                          <ion-row>
                            <ion-col>
                              <ion-button (click)="selectDate()">SELEZIONA PERIODO</ion-button>
                            </ion-col>
                          </ion-row>
                      </ion-grid>
                  </ion-col>
                  <ion-col>
                  <ion-item-divider color="light">
                    <ion-label> DATI </ion-label>
                  </ion-item-divider>
                    <ion-grid>
                      <ion-row>
                        <ion-col>
                          <ion-list>

                            <!-- Checkbox Potenza Attiva -->
                            <ion-item>
                              <ion-checkbox [(ngModel)]="checkboxStates['potenzaAtt']" (ionChange)="updateButtonState()">
                                KW ( Potenza Attiva istantanea )
                              </ion-checkbox>
                              <ion-button shape="round" id="KW-trigger">INFO</ion-button>
                              <ion-popover trigger="KW-trigger" triggerAction="click">
                                <ng-template>
                                  <ion-content class="ion-padding">Potenza Attiva istantanea</ion-content>
                                </ng-template>
                              </ion-popover>
                            </ion-item>
                            

                            <!-- Checkbox Potenza Apparente-->
                            <ion-item>
                              <ion-checkbox [(ngModel)]="checkboxStates['potenzaApp']" (ionChange)="updateButtonState()">
                                KVA ( Potenza Apparente istantanea )
                              </ion-checkbox>
                              <ion-button shape="round" id="KVA-trigger">INFO</ion-button>
                              <ion-popover trigger="KVA-trigger" triggerAction="click">
                                <ng-template>
                                  <ion-content class="ion-padding">Potenza Apparente istantanea</ion-content>
                                </ng-template>
                              </ion-popover>
                            </ion-item>

                            <!-- Checkbox Potenza Reattiva-->
                            <ion-item>
                              <ion-checkbox [(ngModel)]="checkboxStates['potenzaReatt']" (ionChange)="updateButtonState()">
                                KVAr ( Potenza Reattiva istantanea )
                              </ion-checkbox>
                              <ion-button shape="round" id="KVAr-trigger">INFO</ion-button>
                              <ion-popover trigger="KVAr-trigger" triggerAction="click">
                                <ng-template>
                                  <ion-content class="ion-padding">Potenza Reattiva istantanea</ion-content>
                                </ng-template>
                              </ion-popover>
                            </ion-item>

                          </ion-list>
                        </ion-col>
                        <ion-col>
                          <ion-list>

                            <!-- Checkbox CosPhi-->
                            <ion-item>
                              <ion-checkbox [(ngModel)]="checkboxStates['cosPhi']" (ionChange)="updateButtonState()">
                                φ ( Coseno di Phi istantaneo )
                              </ion-checkbox>
                              <ion-button shape="round" id="COS-trigger">INFO</ion-button>
                              <ion-popover trigger="COS-trigger" triggerAction="click">
                                <ng-template>
                                  <ion-content class="ion-padding">Coseno di φ istantaneo</ion-content>
                                </ng-template>
                              </ion-popover>
                            </ion-item>
                            
                            <!-- Checkbox Corrente-->
                            <ion-item>
                              <ion-checkbox [(ngModel)]="checkboxStates['corrente']" (ionChange)="updateButtonState()">
                                A ( Corrente istantanea )
                              </ion-checkbox>
                              <ion-button shape="round" id="A-trigger">INFO</ion-button>
                              <ion-popover trigger="A-trigger" triggerAction="click">
                                <ng-template>
                                  <ion-content class="ion-padding">Corrente istantanea</ion-content>
                                </ng-template>
                              </ion-popover>
                            </ion-item>

                            <!-- Checkbox Tensione-->
                            <ion-item>
                              <ion-checkbox [(ngModel)]="checkboxStates['tensione']" (ionChange)="updateButtonState()">
                                V ( Tensione istantanea )
                              </ion-checkbox>
                              <ion-button shape="round" id="V-trigger">INFO</ion-button>
                              <ion-popover trigger="V-trigger" triggerAction="click">
                                <ng-template>
                                  <ion-content class="ion-padding">Tensione istantanea</ion-content>
                                </ng-template>
                              </ion-popover>
                            </ion-item>

                          </ion-list>
                        </ion-col>
                      </ion-row>
                      <ion-item-divider  color="light">
                        <ion-label> QUADRI </ion-label>
                      </ion-item-divider>
                      <ion-row >
                        <ion-col>
                          <ion-list>

                            <!-- Trasformatore 1 -->
                            <ion-item>
                              <ion-checkbox [(ngModel)]="checkboxStates['TR1']" (ionChange)="updateButtonState()"> TRASFORMATORE 1</ion-checkbox>
                              <ion-button shape="round" id="TR1-trigger">INFO</ion-button>
                              <ion-popover trigger="TR1-trigger" triggerAction="click">
                                <ng-template>
                                  <ion-content class="ion-padding">TRASFORMATORE 1</ion-content>
                                </ng-template>
                              </ion-popover>
                            </ion-item>

                            <ion-item>
                              <ion-checkbox [(ngModel)]="checkboxStates['TR2']" (ionChange)="updateButtonState()"> TRASFORMATORE 2</ion-checkbox>
                              <ion-button shape="round" id="TR2-trigger">INFO</ion-button>
                              <ion-popover trigger="TR2-trigger" triggerAction="click">
                                <ng-template>
                                  <ion-content class="ion-padding">TRASFORMATORE 2</ion-content>
                                </ng-template>
                              </ion-popover>
                            </ion-item>
                            <ion-item>
                              <ion-checkbox [(ngModel)]="checkboxStates['FV']" (ionChange)="updateButtonState()"> FOTOVOLTAICO </ion-checkbox>
                              <ion-button shape="round" id="FV-trigger">INFO</ion-button>
                              <ion-popover trigger="FV-trigger" triggerAction="click">
                                <ng-template>
                                  <ion-content class="ion-padding">FOTOVOLTAICO</ion-content>
                                </ng-template>
                              </ion-popover>
                            </ion-item>
                          </ion-list>
                        </ion-col>
                        <ion-col>
                          <ion-list>
                            <ion-item>
                              <ion-checkbox [(ngModel)]="checkboxStates['BS1']" (ionChange)="updateButtonState()"> BS1 1250A ( chiller Gaudino )</ion-checkbox>
                              <ion-button shape="round" id="BS1-trigger">INFO</ion-button>
                              <ion-popover trigger="BS1-trigger" triggerAction="click">
                                <ng-template>
                                  <ion-content class="ion-padding">BLINDO 1 DA 1250A </ion-content>
                                </ng-template>
                              </ion-popover>
                            </ion-item>
                            <ion-item>
                              <ion-checkbox [(ngModel)]="checkboxStates['BS2']" (ionChange)="updateButtonState()"> BS2 1250A ( soppalco Ingredienti ) </ion-checkbox>
                              <ion-button shape="round" id="BS2-trigger">INFO</ion-button>
                              <ion-popover trigger="BS2-trigger" triggerAction="click">
                                <ng-template>
                                  <ion-content class="ion-padding">BLINDO 2 DA 1250A</ion-content>
                                </ng-template>
                              </ion-popover>
                            </ion-item>
                            <ion-item>
                              <ion-checkbox [(ngModel)]="checkboxStates['B9']" (ionChange)="updateButtonState()"> B9 1600A ( UTA ) </ion-checkbox>
                              <ion-button shape="round" id="B9-trigger">INFO</ion-button>
                              <ion-popover trigger="B9-trigger" triggerAction="click">
                                <ng-template>
                                  <ion-content class="ion-padding">BLINDO DA 1600A</ion-content>
                                </ng-template>
                              </ion-popover>
                            </ion-item>
                          </ion-list>
                        </ion-col>
                      </ion-row>
                    </ion-grid>
                  </ion-col>
                </ion-row>
              </ion-grid>
            </ion-card-content>
          </ion-card>
        </ion-col>
      </ion-row>

      <!-- Grafici Tensione e Corrente -->
      <ion-row>
        <ion-col>

          <ion-card *ngIf="datavolt && dataamp && (checkboxStates['corrente'] || checkboxStates['tensione'])">
            <ion-card-header>
              <ion-card-title>GRAFICI CORRENTE ( A ) E TENSIONE ( V )</ion-card-title>
              <ion-card-subtitle>Grafici che mostrano la corrente e la tenasione del periodo e degli apparecchi selezionati</ion-card-subtitle>
            </ion-card-header>
            <ion-card-content>
              <ion-list>
                
                <ion-item *ngIf="checkboxStates['tensione']">
                    <ion-item-divider color="light">
                      <ion-label> TENSIONE </ion-label>
                    </ion-item-divider>
                    <chart-container *ngIf="datavolt"></chart-container>
                </ion-item>

                
                <ion-item *ngIf="checkboxStates['corrente']">
                  <ion-item-divider color="light">
                    <ion-label> CORRENTE </ion-label>
                  </ion-item-divider>
                  <app-chart-corrente *ngIf="dataamp"></app-chart-corrente>
                </ion-item>

            </ion-list>
            </ion-card-content>
          </ion-card>
        </ion-col>
      </ion-row>

      <!-- Grafico Potenza Attiva -->
      <ion-row>
          <ion-card *ngIf="datakilowatt && checkboxStates['potenzaAtt']">
            <ion-card-header>
              <ion-card-title>GRAFICO POTENZA ATTIVA ( kW )</ion-card-title>
              <ion-card-subtitle>
                Grafico che mostra la potenza attiva del periodo e degli apparecchi
                selezionati
              </ion-card-subtitle>
            </ion-card-header>
          
            <ion-card-content>
              <ion-item>
                <app-chart-kilo-watt *ngIf="datakilowatt"></app-chart-kilo-watt>
              </ion-item>
            </ion-card-content>
          </ion-card>
      </ion-row>

      <!-- Grafico Potenza Reattiva -->
      <ion-row>
          <ion-card *ngIf="datakilovolt && checkboxStates['potenzaReatt']">
          <ion-card-header>
            <ion-card-title>GRAFICO POTENZA REATTIVA ( kVA )</ion-card-title>
            <ion-card-subtitle>
              Grafico che mostra la potenza reattiva del periodo e degli apparecchi selezionati
            </ion-card-subtitle>
          </ion-card-header>
        
          <ion-card-content>
            <ion-item>
              <app-chart-kilo-volt-ampere-react *ngIf="datavolt"></app-chart-kilo-volt-ampere-react>
            </ion-item>
          </ion-card-content>
        </ion-card>
      </ion-row>

      <!-- Grafico Potenza Apparente -->
      <ion-row>
        <ion-col>
          <ion-card *ngIf="datakilovar && checkboxStates['potenzaApp']">
            <ion-card-header>
              <ion-card-title>GRAFICO POTENZA APPARENTE ( kVar )</ion-card-title>
              <ion-card-subtitle>
                Grafico che mostra la potenza apperente del periodo e degli apparecchi
                selezionati
              </ion-card-subtitle>
            </ion-card-header>
          
            <ion-card-content>
              <ion-item>
                <app-chart-kilo-volt-ampere *ngIf="datakilovar"></app-chart-kilo-volt-ampere>
              </ion-item>
            </ion-card-content>
          </ion-card>
        </ion-col>
      </ion-row>

      <!-- Grafico CosPhi -->
      <ion-row>
        <ion-col>
          <ion-card *ngIf="datacos && checkboxStates['cosPhi']">
            <ion-card-header>
              <ion-card-title>GRAFICO CosFi ( φ )</ion-card-title>
              <ion-card-subtitle>
                Grafico che mostra il fattore di potenza del periodo e degli apparecchi
                selezionati
              </ion-card-subtitle>
            </ion-card-header>
          
            <ion-card-content>
              <ion-item>
                <app-chart-cos-phi *ngIf="datacos"></app-chart-cos-phi>
              </ion-item>
            </ion-card-content>
          </ion-card>
        </ion-col>
      </ion-row>

    </ion-grid>
  </div>
</ion-content>
